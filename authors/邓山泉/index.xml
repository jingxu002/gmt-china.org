<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>GMT 中文社区</title>
    <link>http://gmt-china.org/authors/%E9%82%93%E5%B1%B1%E6%B3%89/index.xml</link>
    <description>Recent content on GMT 中文社区</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cmn-Hans</language>
    <managingEditor>admin@gmt-china.org (GMT 中文社区)</managingEditor>
    <webMaster>admin@gmt-china.org (GMT 中文社区)</webMaster>
    <copyright>Powered by [Hugo](https://gohugo.io) &amp; Hosted by [GitHub](https://github.com/gmt-china/gmt-china.org).</copyright>
    <atom:link href="http://gmt-china.org/authors/%E9%82%93%E5%B1%B1%E6%B3%89/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>含中国大陆地区的地形图</title>
      <link>http://gmt-china.org/example/ex010/</link>
      <pubDate>Thu, 24 Nov 2016 00:00:00 +0000</pubDate>
      <author>admin@gmt-china.org (GMT 中文社区)</author>
      <guid>http://gmt-china.org/example/ex010/</guid>
      <description>&lt;div class=&#34;notices info&#34; &gt;&lt;p&gt;数据下载：&lt;a href=&#34;http://gmt-china.org/example/ex010/eq.dat&#34;&gt;eq.dat&lt;/a&gt; &lt;a href=&#34;http://gmt-china.org/blog/etopo1&#34;&gt;ETOPO1_Ice.grd&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;


&lt;p&gt;本文展示了如何用 ETOPO1 数据绘制含中国大陆地区的地形图，同时也展示了如何通过 awk 对数据进行筛选，以及如何绘制简单的图例。&lt;/p&gt;

&lt;p&gt;下面是绘图所使用的bash脚本，同时也提供了一个功能相同的 &lt;a href=&#34;http://gmt-china.org/example/ex010/topo.bat&#34;&gt;bat脚本&lt;/a&gt;。



&lt;pre&gt;&lt;code class=&#34;language-bash line-numbers&#34;&gt;#!/bin/bash

PS=topo.ps
eqfile=eq.dat
R=70/135/15/55

gmt grdcut ETOPO1_Ice.grd -R$R -GcutTopo.grd
gmt grdgradient cutTopo.grd -Ne0.7 -A50 -GcutTopo_i.grd
gmt grd2cpt cutTopo.grd -Cglobe -S-10000/10000/200 -Z -D &amp;gt; colorTopo.cpt

#绘制底图
gmt gmtset FORMAT_GEO_MAP=ddd:mm:ssF
gmt psbasemap -R$R -JM7i -Ba10f5 -BWesN -Xc -Yc -K &amp;gt; $PS
gmt grdimage cutTopo.grd -R -J -IcutTopo_i.grd -CcolorTopo.cpt -Q -O -K &amp;gt;&amp;gt;$PS
gmt pscoast -R -J -Dh -W1/0.2p -I1/0.25p -N1/0.5p -O -K &amp;gt;&amp;gt;$PS

#绘制colorbar
gmt psscale -R -J -DjCB&amp;#43;w7i/0.15i&amp;#43;o0/-0.5i&amp;#43;h -CcolorTopo.cpt -Bxa2000f400&amp;#43;l&amp;#34;Elevation/m&amp;#34; -G-8000/8000 -O -K &amp;gt;&amp;gt;$PS

#分震级绘制地震
awk &amp;#39;$3&amp;gt;=5.0 &amp;amp;&amp;amp; $3&amp;lt;6.0 {print $1,$2,$3*0.04}&amp;#39; $eqfile | gmt psxy -R -J -Sc -Gblue -O -K &amp;gt;&amp;gt; $PS
awk &amp;#39;$3&amp;gt;=6.0 &amp;amp;&amp;amp; $3&amp;lt;7.0 {print $1,$2,$3*0.04}&amp;#39; $eqfile | gmt psxy -R -J -Sc -Gred -O -K &amp;gt;&amp;gt; $PS
awk &amp;#39;$3&amp;gt;=7.0 &amp;amp;&amp;amp; $3&amp;lt;8.0 {print $1,$2,$3*0.06}&amp;#39; $eqfile | gmt psxy -R -J -Sa -Ggreen -W0.4p,black -O -K &amp;gt;&amp;gt; $PS
awk &amp;#39;$3&amp;gt;=8.0 {print $1,$2,$3*0.06}&amp;#39; $eqfile | gmt psxy -R -J -Sa -Gpurple -W0.4p,black -O -K &amp;gt;&amp;gt; $PS

#绘制图例
gmt pslegend -R -J -DjBR&amp;#43;w0.8i&amp;#43;l1.2&amp;#43;o0 -F&amp;#43;g229&amp;#43;p0.25p -O -K &amp;gt;&amp;gt; $PS &amp;lt;&amp;lt;EOF
G 0.01i
H 8 4 MAGNITUDE
C blue
S 0.1i c 0.20 blue 0.25p,blue 0.18i 5~5.9
C red
S 0.1i c 0.24 red 0.25p,red 0.18i 6~6.9
C green
S 0.1i a 0.42 green 0.25p,black 0.18i 7~7.9
C purple
S 0.1i a 0.48 purple 0.25p,black 0.18i 8~8.9
EOF

gmt psxy -R -J -T -O &amp;gt;&amp;gt;$PS
gmt psconvert $PS -A -Tg -P
rm gmt.* cutTopo*.grd colorTopo.cpt
&lt;/code&gt;&lt;/pre&gt;
&lt;/p&gt;

&lt;p&gt;绘图效果：

&lt;figure &gt;
    
        &lt;img src=&#34;http://gmt-china.org/example/ex010/topo.png&#34; /&gt;
    
    
    &lt;figcaption&gt;
        &lt;h4&gt;含中国大陆地区的地形图&lt;/h4&gt;
        
    &lt;/figcaption&gt;
    
&lt;/figure&gt;
&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>