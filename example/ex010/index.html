<!DOCTYPE html>
<html lang=zh-cmn-Hans >


    <meta charset=utf-8 >
    <meta http-equiv=X-UA-Compatible  content="IE=edge">
    <meta name=viewport  content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name=generator  content="Hugo 0.17" />
    <meta name=author  content="GMT 中文社区">
    <meta name=description  content="面向 GMT 中文用户的小众社区">
    <title>含中国大陆地区的地形图 | GMT 中文社区</title>

    
    <link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel=stylesheet >
    <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel=stylesheet >
    <link href="//cdn.bootcss.com/prism/1.5.1/themes/prism-solarizedlight.min.css" rel=stylesheet >
    <link href="//cdn.bootcss.com/prism/1.5.1/plugins/line-numbers/prism-line-numbers.min.css" rel=stylesheet >
    <link href="//cdn.bootcss.com/featherlight/1.5.0/featherlight.min.css" rel=stylesheet >
    <link rel=stylesheet  href="http://gmt-china.org/css/style.css" />
    <link rel=stylesheet  href="http://gmt-china.org/css/mobile.css" />

    <link rel="shortcut icon" href="http://gmt-china.org/images/favicon.ico" type="image/x-icon" type="image/png" />
<link rel=icon  href="http://gmt-china.org/images/apple-touch-icon-152x152.png" type="image/png" />
<link rel=apple-touch-icon  href="http://gmt-china.org/images/apple-touch-icon.png" type="image/png" />
<link rel=apple-touch-icon  sizes=57x57  href="http://gmt-china.org/images/apple-touch-icon-57x57.png" type="image/png" />
<link rel=apple-touch-icon  sizes=72x72  href="http://gmt-china.org/images/apple-touch-icon-72x72.png" type="image/png" />
<link rel=apple-touch-icon  sizes=76x76  href="http://gmt-china.org/images/apple-touch-icon-76x76.png" type="image/png" />
<link rel=apple-touch-icon  sizes=114x114  href="http://gmt-china.org/images/apple-touch-icon-114x114.png" type="image/png" />
<link rel=apple-touch-icon  sizes=120x120  href="http://gmt-china.org/images/apple-touch-icon-120x120.png" type="image/png" />
<link rel=apple-touch-icon  sizes=144x144  href="http://gmt-china.org/images/apple-touch-icon-144x144.png" type="image/png" />
<link rel=apple-touch-icon  sizes=152x152  href="http://gmt-china.org/images/apple-touch-icon-152x152.png" type="image/png" />
<link rel=apple-touch-icon  sizes=180x180  href="http://gmt-china.org/images/apple-touch-icon-180x180.png" type="image/png" />
<meta name=msapplication-TileImage  content="http://gmt-china.org/images/apple-touch-icon-144x144.png"/>
<meta name=msapplication-TileColor  content="#d83434"/>


    




    <div class=container >
        <header id=header >
    <div class=outer >
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class=container-fluid >
                <div class=navbar-header >
                    <button type=button  class="navbar-toggle collapsed" data-toggle=collapse  data-target="#navbar-collapse-menu" aria-expanded=false >
          	                <span class=sr-only >Toggle navigation</span>
          	                <span class=icon-bar ></span>
          	                <span class=icon-bar ></span>
          	                <span class=icon-bar ></span>
          	            </button>
    		            <a class=navbar-brand  href="http://gmt-china.org/">
    			            <span class=site-title >GMT 中文社区</span>
    		            </a>
                </div>

                <div class="collapse navbar-collapse" id=navbar-collapse-menu >
                    <ul class="nav navbar-nav navbar-right">
                        
                        
                        <li class=nav-item ><a href="/">首页</a>
                        
                        <li class=nav-item ><a href="/docs/">文档</a>
                        
                        <li class=nav-item ><a href="/gallery/">图库</a>
                        
                        <li class=nav-item ><a href="/blog/">博客</a>
                        
                        <li class=nav-item ><a href="/download/">下载</a>
                        
                        <li class=nav-item ><a href="/authors/">贡献者</a>
                        
                        <li class=nav-item ><a href="/about/">关于</a>
                        
                        
                        
                        <li class=nav-item ><a href="https://github.com/gmt-china"><i class="fa fa-github fa-lg" aria-hidden=true ></i></a>
                        
                        <li class=nav-item ><a href="mailto:admin@gmt-china.org"><i class="fa fa-envelope fa-lg" aria-hidden=true ></i></a>
                        
                        <li><a href="http://gmt-china.org/index.xml"><i class="fa fa-rss-square fa-lg" aria-hidden=true ></i></a>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>


        <div id=body >
            <div class=outer >
                <section id=main >
                    <article>
                        <div class=article-inner >
                            <header class=article-header >
    <h1 class=article-title  itemprop=name >
	<a href="http://gmt-china.org/example/ex010/" class=permalink >含中国大陆地区的地形图</a>
    </h1>

    
    <div class=article-meta >
        
        
        
        <div class=article-category >
            <i class="fa fa-sitemap"></i>
            
            <a class=article-category-link  href="http://gmt-china.org/categories/GMT%E7%A4%BA%E4%BE%8B/">GMT示例</a>
            
            
        </div>
        
        

        
        
        
        <div class=article-category >
		<i class="fa fa-tags"></i>
            
            <a class=article-category-link  href="http://gmt-china.org/tags/%E5%9C%B0%E5%BD%A2%E5%9B%BE/">地形图</a>
            
            
        </div>
        
        

        
        
        
        <div class=article-category >
            <i class="fa fa-user"></i>
            
            <a class=article-category-link  href="http://gmt-china.org/authors/%E9%82%93%E5%B1%B1%E6%B3%89/">邓山泉</a>
            
            
        </div>
        
        

        
        <time class=article-date  datetime="2016-11-23 00:00:00 &#43;0000 UTC" itemprop=datePublished >2016年11月23日</time>
        
    </div>
    
</header>

                            <div class=article-body  itemprop=articleBody >
                                

                                <div class="notices info" ><p>数据下载：<a href="/example/ex010/eq.dat">eq.dat</a> <a href="/blog/etopo1">ETOPO1_Ice.grd</a></p>
</div>


<p>本文展示了如何用 ETOPO1 数据绘制含中国大陆地区的地形图，同时也展示了如何通过 awk 对数据进行筛选，以及如何绘制简单的图例。</p>

<p>下面是绘图所使用的bash脚本，同时也提供了一个功能相同的 <a href="/example/ex010/topo.bat">bat脚本</a>。



<pre><code class="language-bash line-numbers">#!/bin/bash

PS=topo.ps
eqfile=eq.dat
R=70/135/15/55

gmt grdcut ETOPO1_Ice.grd -R$R -GcutTopo.grd
gmt grdgradient cutTopo.grd -Ne0.7 -A50 -GcutTopo_i.grd
gmt grd2cpt cutTopo.grd -Cglobe -S-10000/10000/200 -Z -D &gt; colorTopo.cpt

#绘制底图
gmt gmtset FORMAT_GEO_MAP=ddd:mm:ssF
gmt psbasemap -R$R -JM7i -Ba10f5 -BWesN -Xc -Yc -K &gt; $PS
gmt grdimage cutTopo.grd -R -J -IcutTopo_i.grd -CcolorTopo.cpt -Q -O -K &gt;&gt;$PS
gmt pscoast -R -J -Dh -W1/0.2p -I1/0.25p -N1/0.5p -O -K &gt;&gt;$PS

#绘制colorbar
gmt psscale -R -J -DjCB&#43;w7i/0.15i&#43;o0/-0.5i&#43;h -CcolorTopo.cpt -Bxa2000f400&#43;l&#34;Elevation/m&#34; -G-8000/8000 -O -K &gt;&gt;$PS

#分震级绘制地震
awk &#39;$3&gt;=5.0 &amp;&amp; $3&lt;6.0 {print $1,$2,$3*0.04}&#39; $eqfile | gmt psxy -R -J -Sc -Gblue -O -K &gt;&gt; $PS
awk &#39;$3&gt;=6.0 &amp;&amp; $3&lt;7.0 {print $1,$2,$3*0.04}&#39; $eqfile | gmt psxy -R -J -Sc -Gred -O -K &gt;&gt; $PS
awk &#39;$3&gt;=7.0 &amp;&amp; $3&lt;8.0 {print $1,$2,$3*0.06}&#39; $eqfile | gmt psxy -R -J -Sa -Ggreen -W0.4p,black -O -K &gt;&gt; $PS
awk &#39;$3&gt;=8.0 {print $1,$2,$3*0.06}&#39; $eqfile | gmt psxy -R -J -Sa -Gpurple -W0.4p,black -O -K &gt;&gt; $PS

#绘制图例
gmt pslegend -R -J -DjBR&#43;w0.8i&#43;l1.2&#43;o0 -F&#43;g229&#43;p0.25p -O -K &gt;&gt; $PS &lt;&lt;EOF
G 0.01i
H 8 4 MAGNITUDE
C blue
S 0.1i c 0.20 blue 0.25p,blue 0.18i 5~5.9
C red
S 0.1i c 0.24 red 0.25p,red 0.18i 6~6.9
C green
S 0.1i a 0.42 green 0.25p,black 0.18i 7~7.9
C purple
S 0.1i a 0.48 purple 0.25p,black 0.18i 8~8.9
EOF

gmt psxy -R -J -T -O &gt;&gt;$PS
gmt psconvert $PS -A -Tg -P
rm gmt.* cutTopo*.grd colorTopo.cpt
</code></pre>
</p>

<p>绘图效果：

<figure >
    
        <img src="/example/ex010/topo.png" />
    
    
    <figcaption>
        <h4>含中国大陆地区的地形图</h4>
        
    </figcaption>
    
</figure>
</p>

                            </div>
                            <footer class=article-footer >
</footer>

                        </div>
                        
<nav>
    <ul class=pager >
        
        <li class=previous >
            <a href="http://gmt-china.org/example/ex009/">
                <strong class=article-nav-caption >
                上一篇
                </strong>
                <div class=article-nav-title >绘制晨昏线及太阳位置</div>
            </a>
        
        

        
    </ul>
</nav>


                    </article>
                </section>
            </div>
        </div>
        <footer id=footer  class=footer >
    <div class=copyright >
        &copy; 
        <span itemprop=copyrightYear > 2016</span>
        <span class=with-love ><i class="fa fa-heart"></i></span>
        <span class=author  itemprop=copyrightHolder >GMT 中文社区</span>
    </div>
    <div class=powered-by >Powered by <a href="https://gohugo.io" target=_blank >Hugo</a> &amp; Hosted by <a href="https://github.com/gmt-china/gmt-china.org" target=_blank >GitHub</a>.</div>
</footer>
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.5.1/prism.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.5.1/components/prism-bash.min.js"></script>
<script src="//cdn.bootcss.com/prism/1.5.1/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.12/clipboard.js"></script>
<script src="//cdn.bootcss.com/featherlight/1.5.0/featherlight.min.js"></script>
<script src="http://gmt-china.org/js/script.js"></script>


    </div>